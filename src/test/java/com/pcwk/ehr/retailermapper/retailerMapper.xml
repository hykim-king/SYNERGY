<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcwk.ehr.mapper.Retailermapper">

  <select id="getAll" resultType="com.pcwk.ehr.retailer.RetailerDTO">
    SELECT
      RETAILER_CODE,
      PRODUCT_NAME,
      RETAILER_NAME,
      CAR_MF,
      AREA,
      ADDRESS,
      TELEPHONE,
      REG_DT,
      REG_ID,
      MOD_DT,
      MOD_ID
    FROM RETAILER
  </select>

  <select id="getOne" parameterType="int" resultType="com.pcwk.ehr.retailer.RetailerDTO">
    SELECT
      RETAILER_CODE,
      PRODUCT_NAME,
      RETAILER_NAME,
      CAR_MF,
      AREA,
      ADDRESS,
      TELEPHONE,
      REG_DT,
      REG_ID,
      MOD_DT,
      MOD_ID
    FROM RETAILER
    WHERE RETAILER_CODE = #{retailerCode}
  </select>

  <select id="doRetrieveByCarMfList"
          parameterType="java.util.List"
          resultType="com.pcwk.ehr.retailer.RetailerDTO">
    SELECT
      RETAILER_CODE,
      PRODUCT_NAME,
      RETAILER_NAME,
      CAR_MF,
      AREA,
      ADDRESS,
      TELEPHONE,
      REG_DT,
      REG_ID,
      MOD_DT,
      MOD_ID
    FROM RETAILER
    <where>
      <if test="carMfList != null and carMfList.size > 0">
        CAR_MF IN
        <foreach collection="carMfList" item="mf" open="(" separator="," close=")">
          #{mf}
        </foreach>
      </if>
    </where>
  </select>

  <select id="getCount" resultType="int">
    SELECT COUNT(*) FROM RETAILER
  </select>
</mapper>
